<!doctype html> <html lang="en"> <head> <meta charset="utf-8" /> <title>m3u8 Link Grabber</title> <meta name="viewport" content="width=device-width, initial-scale=1" /> <style> body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: auto; } input[type="url"] { width: 100%; padding: 0.5rem; } button { padding: 0.5rem 1rem; margin-top: 0.5rem; } .results { margin-top: 1rem; } .item { padding: 0.5rem; border: 1px solid #ddd; border-radius: 6px; margin-bottom: 0.5rem; display: flex; justify-content: space-between; align-items: center; } .badge { font-family: monospace; color: #555; } .copy { cursor: pointer; padding: 0.25rem 0.5rem; border: 1px solid #ccc; border-radius: 4px; background: #f7f7f7; } .note { color: #666; font-size: 0.9em; } .hidden { display: none; } </style> </head> <body> <h1>m3u8 Link Grabber</h1> <p class="note">Enter a page URL. The app will fetch the page source and extract any m3u8 links found in the HTML or scripts.</p> <input id="urlInput" type="url" placeholder="https://roxiestreams.live/nba-streams-1" /> <button id="runBtn">Grab m3u8 links</button> <div class="results" id="results" aria-live="polite"></div> <script> // Utility to deduplicate and normalize URLs function normUrl(u, base) { try { return new URL(u, base).href; } catch { return u; } } // Simple regex to catch common m3u8 URLs const M3U8_REGEX = /https?:\/\/[^"'()\s]+\.m3u8[^"'()\s]*/g; document.getElementById('runBtn').addEventListener('click', async () => { const url = document.getElementById('urlInput').value.trim(); const resultsEl = document.getElementById('results'); resultsEl.innerHTML = ''; if (!url) { resultsEl.textContent = 'Please enter a URL.'; return; } // Header hint to the user const loading = document.createElement('div'); loading.textContent = 'Fetching page... (may be blocked by CORS)'; resultsEl.appendChild(loading); try { // Fetch the page content // Note: This fetch will be subject to CORS. If the site disallows it, you may need a server-side proxy. const resp = await fetch(url, { mode: 'cors', credentials: 'omit' }); // If CORS disallows, fallback message if (!resp.ok) { loading.textContent = `Failed to fetch page: ${resp.status} ${resp.statusText}. This may be due to CORS protections.`; return; } const text = await resp.text(); // Clear loading indicator loading.remove(); // Collect potential m3u8 candidates from HTML and inline script blocks const candidates = new Set(); // 1) Direct HTML attributes and tags const doc = new DOMParser().parseFromString(text, 'text/html'); doc.querySelectorAll('source[src], video[src], audio[src]').forEach(n => { const src = n.getAttribute('src'); if (src && src.endsWith('.m3u8')) candidates.add(normUrl(src, url)); }); // 2) href/script contents that may contain m3u8 doc.querySelectorAll('[src], [href]').forEach(n => { const attr = n.getAttribute(n.hasAttribute('href') ? 'href' : 'src'); if (attr && attr.includes('.m3u8')) candidates.add(normUrl(attr, url)); }); // 3) script tag contents doc.querySelectorAll('script').forEach(s => { const content = s.textContent || ''; const matches = content.match(M3U8_REGEX); if (matches) matches.forEach(m => candidates.add(normUrl(m, url))); }); // 4) meta refresh or JSON data blobs const blobMatches = text.match(M3U8_REGEX); if (blobMatches) blobMatches.forEach(m => candidates.add(normUrl(m, url))); // If nothing found, show a friendly message if (candidates.size === 0) { resultsEl.innerHTML = '<div class="item">No m3u8 links found on this page.</div>'; return; } // Render results const frag = document.createDocumentFragment(); candidates.forEach((u) => { const row = document.createElement('div'); row.className = 'item'; const left = document.createElement('span'); left.textContent = u; const right = document.createElement('div'); right.style.display = 'flex'; right.style.gap = '8px'; const openBtn = document.createElement('a'); openBtn.href = u; openBtn.target = '_blank'; openBtn.rel = 'noopener'; openBtn.textContent = 'Open'; openBtn.className = 'copy'; right.appendChild(openBtn); const copyBtn = document.createElement('button'); copyBtn.className = 'copy'; copyBtn.textContent = 'Copy'; copyBtn.addEventListener('click', async () => { try { await navigator.clipboard.writeText(u); copyBtn.textContent = 'Copied'; setTimeout(() => copyBtn.textContent = 'Copy', 1500); } catch { copyBtn.textContent = 'Error'; setTimeout(() => copyBtn.textContent = 'Copy', 1500); } }); right.appendChild(copyBtn); row.appendChild(left); row.appendChild(right); frag.appendChild(row); }); resultsEl.appendChild(frag); } catch (err) { resultsEl.innerHTML = `<div class="item">Error fetching or parsing page: ${err.message}</div>`; } }); </script> </body> </html>